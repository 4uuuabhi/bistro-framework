<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE server [
	<!ENTITY SYSClassLoader SYSTEM "ClassLoader.xml">
]>
<server name="webServer" queue-file="message-queue" version="2.1"
				xmlns:activity="http://schemas.hill30.com/workflow/config/activities"
				xmlns="http://schemas.hill30.com/workflow/config">

	&SYSClassLoader;

	<!-- System handlers -->
	<!--<section-handler name="import" load="starting" type="WorkflowServer.Foundation.Configuration.ImportTagHandler" />-->

	<!-- datastores -->
	<import path="DataStores" file-name="*" tag-name="datastore" />

	<!-- custom documents -->
	<import path="Documents" file-name="?" tag-name="document" />

	<!-- **************ACTIVITIES************************** -->

	<import path="ServerSide" file-name="*" tag-name="activity" />


	<!--
		log tag controls logging of the messages generated by the server. Multiple log tags will independently 
		generate multiple logs.
		
		The name attribute sets the logger name. If no name attribute is provided, the log tag defines the default
		logger with the name "default". Names should be unique.
		The limit-by attribute specifies what causes switch over to a new generation of the log file. Allowed
		values are "size" and "time"
		The limit attribute specifies the value of the threshold causing the switch over. For size this is the
		max size of the file, for time this is time.
		The max-generations attribute specifies how many generation of the log file should be preserved.
		The location attribute specifies the path where the log files should be placed
		The file-prefix attribute specifies the file name for the log file (without the generation number)
		
		The nested log and ignore tags control which messages are to be recorded in the log. Every message is 
		checked against the logger log/ignore tags. If the message has a code which matches the code attribute 
		of a log tag, the message is recorded, if it matches the ignore tag, the message is discarded.
		Both log and ignore tags can be nested. If a message has a code which matches a log or ignore tag with 
		nested tags, the final decision belongs to the nested tag, i.e. if a message matches an ignore tag
		and its nested log tag, it will be logged, converseley if it matches log and its nested ignore tag, it 
		will be ignored.
		The definition of the default logger is always appended by <log code="*"/> tag. Which means "record 
		everything what was not explicitly disabled"
		
		When this configuration file is updated the changes in the log tag affect logging as follows:
		if the updated file does not have a log file for a logger with a particular name, such logger
		is stopped immediatly. This rule does not apply to the default logger. 
		Changes in the limit-by, limit, and max-generations attributes as well as log/ignore nested tags
		take effect immediatly and can immediatly cause switch over to a new generation of the log file.
		Changes in the location and/or file-prefix attributes take effect when the logger switches over 
		to a new generation of the log file.
		
	-->
	<!-- log code="WorkflowServer.*"/-->
	<log name="default" limit-by="time" limit="1d" max-generations="10" location="Logs" file-prefix="Log">
		<ignore code="WorkflowServer.Web.WebCache.*" />
	</log>
	<log name="Caching" limit-by="time" limit="1d" max-generations="10" location="Logs" file-prefix="CacheLog">
		<log code="WorkflowServer.Web.WebCache.*" />
	</log>

	<!--
		alert tag controls email alerts. Multiple alert tags will independently generate multiple alert streams.
		
		The name attribute sets the logger name. If no name attribute is provided, the log tag defines the default
		logger with the name "default". Names should be unique.
		The send-to attribute specifies where alert emails should be sent.
		The threshold attribute specifies the max number of alert emails to be sent over an hour. If this threshold 
		is reached no further emails will be sent till the hour ends. When it does, the counter resets. 
		Any suppressed alerts are logged to the logger specified by the overflow attribute. Also when the counter
		resets an email with a counter of suppressed alerts is sent to the send-to address.
		
		The nested log and ignore tags control which messages are to be sent out as alerts. They work in the same
		way as in the log tag.
		
		When this configuration file is updated the changes in the alert tag affect take effect immediatly
	-->
	<alert send-to="support@hill30.com" threshold="60" overflow="default">
		<ignore code="*"/>
	</alert>
</server>